---
layout: posts
title: "Bazel 3.5"
authors:
  - aiuto
---

[Bazel 3.5](https://github.com/bazelbuild/bazel/releases/tag/3.5.0) has just
been released.

Bazel 3.5 is a minor release. It is an incremental update to Bazel 3.4.

## Incompatible changes

*   Remove flags:
    *   `--incompatible_symlinked_sandbox_expands_tree_artifacts_in_runfiles_tree`
    *   `--experimental_process_wrapper_wait_fix`
    *   `--experimental_ui_deduplicate`
    *   `--experimental_ignore_deprecated_instrumentation_spec` and remove
        the old deprecated behavior.
*   Bazel now correctly prefers Xcode versions in `/Applications` over any other
    paths, which resolves an issue with accidentally picking up an Xcode version
    from a Time Machine backup or network disk. In the improbable case that you
    relied on the old behavior and Bazel now picks up Xcode from the wrong
    location, you can fix it by moving that Xcode version to /Applications.

## New features

*   cquery now follows aspects with `--include_aspects`.
*   Add support to bazel/crosstool for building arm64 on macos aka darwin.

## Important changes

*   Add opt in `oso_prefix_is_pwd` feature for Apple builds.
*   Add InstrumentedFilesInfo provider to Starlark globals.
*   Fixed resource shrinking when <overlayable/> tags are used.
*   Make filegroup always forward InstrumentedFilesProvider and not collect any
    sources directly.
*   Support signing key rotation in `android_binary`.
*   Remove legacy handling of `--extra_checks`.
*   Major changes to reporting of Starlark errors and the call stack. Please be
    alert to possible regressions, such as errors that lack relevant location
    information.
*   The prelude file (//tools/build_rules:prelude_bazel) is now processed as a
    Starlark module, rather than being sourced into the BUILD file textually.
    This may cause slight breakages depending on the content of the prelude
    file. Use of the prelude file is discouraged. See the discussion in
    [issue 3835](https://github.com/bazelbuild/bazel/issues/3835).

## Rules

`cc_common.compile` support for `include_prefix` & `strip_include_prefix`.
`--apple_bitcode` now takes an optional platform and only applies the Bitcode
mode to that platform if present. The option may be provided multiple times.
`NS_BLOCK_ASSERTIONS` is now passed for all Apple architectures. Update coverage
configuration for Python, filegroup, and shell script rules to distinguish
between source and dependency attributes.

This release contains contributions from many people at Google, as well as Adam
Gross, Andrew Suffield, Benjamin Peterson, David Ostrovsky, Ed Schouten,
Grzegorz Lukasik, Holger Freyther, Kalle Johansson, Keith Smiley, Kerrick
Staley, Kyle Teske, Mostyn Bramley-Moore, Ryan Beasley, Ryan Pavlik, Siggi
Simonarson, Stiopa Koltsov, Ulf Adams, Xiaoyi Shi, Yannic Bonenberger, Yesudeep
Mangalapilly, bnczk, mai12.
